<!doctype html>
<html lang="en">
<!-- 
  footer는 현재 fixed-bottom 이지만 구현이 완료된 후 static으로 바꿔야함
 -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/style.css">
    <title>도서로</title>
</head>

<body>
    <div class="flex w-100">
        <!-- 상단 바 -->
        <nav class="navbar fixed-top navbar-expand-md navbar-light bg-white ps-3 pe-3" id="topNav">
            <div class="container-fluid">
                <a class="navbar-brand" href="/"><img src="/img/logo3.png" width="160" height="64"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse justify-content-sm-end align-items-center" id="navbarCollapse">
                    <ul class="navbar-nav mb-md-0">
                        {% if user %}
                        <li class="nav-item"><a class="nav-link p-3">안녕하세요 {{user.nick}}님</a></li>
                        <li class="nav-item"><a class="nav-link p-3" href="/mypage">마이페이지</a></li>
                        <li class="nav-item"><a class="nav-link p-3" href="/pages/like">관심상품</a></li>
                        <li class="nav-item"><a class="nav-link p-3" href="/auth/logout">로그아웃</a></li>
                        {% else %}
                        <li class="nav-item"><a class="nav-link p-3" href="/pages/like">관심상품</a></li>
                        <li class="nav-item"><a class="nav-link p-3" href="/login">로그인</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

        <!-- main -->
        <main class="border container-sm mt-0 mb-0 min-vh-100 p-5">
            <!-- 검색 기능 -->
            <form id="search-form" action="/search/{{searchWord}}" class="searchForm d-flex container pt-2">
                <select class="form-select w-25" name="searchFilter">
                    <option value>전체</option>
                    <option value="postTitle">게시물</option>
                    <option value="bookTitle">책</option>
                    <option value="bookAuther">저자</option>
                    <option value="bookPublisher">출판사</option>
                </select>
                <input type="text" class="form-control ps-3" id="book-publisher" name="searchWord" placeholder="검색">
                <button class="btn btn-primary" type="submit"><img src="/img/pngegg.png" width="35" height="25"
                        class="mt-1"></button>
            </form>

            <!-- 메뉴이동 -->
            <div class="menuForm container mt-2 mb-2 justify-content-center d-flex" role="group">
                <div class="ms-1 me-1"><button type="button" class="btn fw-bold"
                        onclick="location.href='/pages/saleBoard'">팝니다</button></div>
                <div class="ms-1 me-1"><button type="button" class="btn fw-bold"
                        onclick="location.href='/pages/bookRequest'">삽니다</button></div>
                <div class="ms-1 me-1"><button type="button" class="btn fw-bold"
                        onclick="location.href='/pages/donationBoard'">무료나눔</button></div>
                <div class="ms-1 me-1"><button type="button" class="btn fw-bold"
                        onclick="location.href='/pages/community'">커뮤니티</button></div>
            </div>

            <h1 class="h2 fw-bold mb-4">커뮤니티</h1>
            <form id="book-form" class="mb-5"><a href="/pages/registCommunity"
                    class="addBook text-decoration-none btn-primary p-2">글 등록</a></form>

            <!-- 각 게시물 -->
            {% for community in communities | reverse %}
            <div class="postingList border p-5" onclick="location.href='/free_community/community/{{community.id}}'">
                <div class="pb-3 border-bottom">
                    <div class="d-sm-flex justify-content-between align-items-center">
                        <h1 class="postingTitle h3 fw-bold">{{community.title}}</h1>
                        <a class="text-decoration-none text-dark">{{community.createdAt}}</a>
                    </div>
                </div>
                <p class="postingBody pt-3">{{community.content}}</p>
            </div>
            {% endfor %}
        </main>

        <!-- footer -->
        <nav class="navbar navbar-expand-md bg-dark border-1" id="footerNav"></nav>
    </div>
    <script>
        function one() {
            const request = document.getElementById('search-form');
            request.setAttribute('action', '/search{{searchWord}}');
            request.setAttribute('method', 'GET');
        }
    </script>
    <!-- <script src="/js/searchDisplay.js"></script> -->
    <script src="/js/topNav.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
</body>

</html>